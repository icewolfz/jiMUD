<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <title>Immortal Tools</title>
    <link rel="shortcut icon" href="../assets/icons/png/ied.png" />
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-select.min.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-treeview.min.css" rel="stylesheet" type="text/css" />
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="css/ied.css" rel="stylesheet" type="text/css" />
    <link href="css/form.css" rel="stylesheet" type="text/css" />
    <link href="css/datatables.min.css" rel="stylesheet" type="text/css" />
    <script>
        if (typeof module === 'object') { window.module = module; module = undefined; }
    </script>
    <script src="../lib/jquery.min.js" type="text/javascript"></script>
    <script src="../lib/bootstrap.min.js" type="text/javascript"></script>
    <script src="../lib/bootstrap-select.min.js" type="text/javascript"></script>
    <script src="../lib//datatables.min.js" type="text/javascript"></script>
    <script src="../lib//datatables.scrollResize.js" type="text/javascript"></script>
    <script>
        //cSpell:ignore hellip vscroll hscroll ungroup crosshairs haspopup tablist tabpanel labelledby
        const { IED } = require('./js/ied');
        const { remote, ipcRenderer } = require('electron');
        const { nativeImage, dialog, Menu, MenuItem } = remote;
        const { parseTemplate } = require('./js/library');
        const { Settings } = require('./js/settings');
        const fs = require('fs');
        const path = require('path');


        var _ied;

        var menu = [
            {
                label: '&File',
                id: 'file',
                submenu: [
                    {
                        label: '&Upload',
                        accelerator: "CmdOrCtrl+U",
                        enabled: false,
                        click: () => {

                        }
                    },
                    {
                        label: '&Download',
                        accelerator: "CmdOrCtrl+D",
                        enabled: false,
                        click: () => {

                        }
                    },
                    { type: 'separator' },
                    {
                        label: '&R&estart',
                        enabled: false,
                        click: () => {

                        }
                    },
                    {
                        label: '&Pause',
                        enabled: false,
                        click: () => {

                        }
                    },
                    {
                        label: '&Stop',
                        enabled: false,
                        click: () => {

                        }
                    },
                    { type: 'separator' },
                    {
                        label: '&Reset all',
                        accelerator: "CmdOrCtrl+R",
                        click: () => {

                        }
                    },
                    { type: 'separator' },
                    {
                        label: '&Close',
                        click: () => { window.close(); }
                    }
                ]
            },
            {
                label: '&Edit',
                submenu: [
                    {
                        label: '&Refresh',
                        accelerator: "F5"
                    },
                    { type: 'separator' },
                    {
                        label: '&Editor',
                        accelerator: "CmdOrCtrl+E"
                    },
                    { type: 'separator' },
                    {
                        label: '&Backup',
                        enabled: false,
                        accelerator: "CmdOrCtrl+B"
                    },
                    {
                        label: '&Rename',
                        enabled: false,
                        accelerator: "F2"
                    },
                    {
                        label: '&Delete',
                        enabled: false,
                        accelerator: "Delete"
                    },
                    {
                        label: '&Create directory',
                        accelerator: "CmdOrCtrl+N"
                    },
                    { type: 'separator' },
                    {
                        label: '&Select all',
                        enabled: false,
                        accelerator: "CmdOrCtrl+A"
                    },
                    { type: 'separator' },
                    { type: 'separator' },
                    {
                        label: '&Open...',
                        enabled: false,
                        accelerator: "CmdOrCtrl+O"
                    },
                    { type: 'separator' },
                    {
                        label: 'Open &with...',
                        enabled: false,
                        submenu: [
                            {
                                label: '&Default',
                                //linux - xdg-open /filepath/file.txt
                                //windows jusy open wiht shell process?
                                //mac - Open <filename> ?
                                accelerator: "CmdOrCtrl++Shift+E"
                            },
                            {
                                label: '&Editor',
                            },
                        ]
                    },
                    { type: 'separator' },
                    {
                        label: '&Clear log...'
                    }
                ]
            },
            {
                label: '&View',
                submenu: [
                    { label: '&Show quere', type: 'checkbox' },
                    { label: 'Sync folders', type: 'checkbox', accelerator: "CmdOrCtrl++Shift+S" },
                    { type: 'separator' },
                    { label: 'Preferences...' },
                ]
            },
        ];

        remote.getCurrentWindow().setMenu(Menu.buildFromTemplate(menu));

        $(document).ready(() => {
            var options = Settings.load(remote.getGlobal('settingsFile'));
            _ied = new IED();
            var data = [];

            for (var i = 0; i < 200; i++) {
                data.push([i, i, i, i]);
            }

            $('#local-list').DataTable({
                data: data,
                paging: false,
                select: true,
                searching: false,
                info: false,
                scrollY: 300, //continaer - column headr height
                scrollX: 300,
                fixedHeader: {
                    header: true,
                    footer: false
                },
                scrollResize: true,
            });
            $('#remote-list').DataTable({
                data: data,
                paging: false,
                select: true,
                searching: false,
                info: false,
                scrollY: 300, //continaer - column headr height
                scrollX: 300,
                fixedHeader: {
                    header: true,
                    footer: false
                },
                scrollResize: true,
            });
            $('#queue-list').DataTable({
                data: data,
                paging: false,
                select: true,
                searching: false,
                info: false,
                scrollY: 300, 
                scrollX: '100vw',
                fixedHeader: {
                    header: true,
                    footer: false
                },
                scrollResize: true,
                sorting:false

            });
        });

        ipcRenderer.on('GMCP-received', (event, data) => {
            IED.processGMCP(data.mod, data.obj);
        });
    </script>
</head>

<body>
    <div id="toolbar" class="btn-toolbar" role="toolbar">
        <button id="btn-refresh" type="button" class="btn btn-default btn-xs" title="Refresh" onclick=""><i class="fa fa-refresh"></i></button>
        <div class="btn-group" role="group">
            <button id="btn-upload" disabled="disabled" type="button" class="btn btn-default btn-xs" title="Upload files" onclick=""><i class="fa fa-upload"></i></button>
            <button id="btn-download" disabled="disabled" type="button" class="btn btn-default btn-xs" title="Download files" onclick=""><i class="fa fa-download"></i></button>
        </div>
        <div class="btn-group" role="group">
            <button id="btn-rename" disabled="disabled" type="button" class="btn btn-default btn-xs" title="Rename" onclick=""><i class="fa fa-i-cursor"></i></button>
            <button id="btn-delete" disabled="disabled" type="button" class="btn btn-danger btn-xs" title="Delete" onclick=""><i class="fa fa-times"></i></button>
        </div>
        <button id="btn-newfolder" type="button" class="btn btn-default btn-xs" title="Create directory" onclick="">
            <span class="fa-stack" style="top: -1px;width: 1em;height: 1em;line-height: 1em;font-size: 1em;">
                <i class="fa fa-folder-o fa-stack-2x" style="font-size: 1em"></i>
                <i class="fa fa-certificate fa-stack-1x" style="font-size: 0.8em;margin-top: -2px;left:5px;"></i>
            </span>                    
        </button>
        <div class="btn-group" role="group" id="queue-controls">
            <button id="btn-restart" disabled="disabled" type="button" class="btn btn-default btn-xs" title="Restart" onclick=""><i class="fa fa-rotate-left"></i></button>
            <button id="btn-pause" disabled="disabled" type="button" class="btn btn-default btn-xs" title="Pause" onclick="" data-toggle="button"><i class="fa fa-pause"></i></button>
            <button id="btn-stop" disabled="disabled" type="button" class="btn btn-warning btn-xs" title="Stop" onclick=""><i class="fa fa-stop"></i></button>
        </div>

        <button id="btn-reset" type="button" class="btn btn-warning btn-xs" title="Reset all" onclick=""><i class="fa fa-eject"></i></button>

        <button id="btn-clear" type="button" class="btn btn-default btn-xs" title="Clear log" onclick="">
            <span class="fa-stack" style="top: -1px;width: 1em;height: 1em;line-height: 1em;font-size: 1em;">
                <i class="fa fa-file-o fa-stack-2x" style="font-size: 1em"></i>
                <i class="fa fa-times fa-stack-1x" style="font-size: 0.5em;margin-top: 1px;"></i>
            </span>                    
        </button>
        <button id="btn-queue" type="button" class="btn btn-default btn-xs" title="Show queue" onclick="" data-toggle="button"><i class="fa fa-list-alt"></i></button>
    </div>
    <div id="main">
        <div id="local">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <label class="control-label" for="local-path">
                        Local
                    </label>

                    <span class="path-container">
                    <div class="input-group">
                        <input type="text" id="local-path" class="form-control" />
                        <span class="input-group-btn" style="width: 17px;">
                            <button id="button-actions" class="btn btn-default" style="width:100%;padding-left:4px;padding-right:4px;" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span class="caret"></span>
                    </button>
                    </span>
                </div>
                </span>
                <span class="path-buttons">
                            <button id="btn-local-up" disabled="disabled" type="button" class="btn btn-default btn-xs" title="Go up a directory" onclick="">
                                <span class="fa-stack" style="top: -1px;width: 1em;height: 1em;line-height: 1em;font-size: 1em;">
                                    <i class="fa fa-folder-o fa-stack-2x" style="font-size: 1.2em"></i>
                                    <i class="fa fa-caret-up fa-stack-1x" style="font-size: 1em;margin-top: 1px;"></i>
                                </span>
                </button>
                <button id="btn-sync" type="button" class="btn btn-default btn-xs" title="Sync folders" onclick="" data-toggle="button"><i class="fa fa-exchange"></i></button>
                </span>
            </div>
            <div class="panel-body" style="padding:0px;top:31px;bottom:1px;left:1px;right:5px;position: absolute;">
                <table id="local-list" class="table table-striped table-hover table-condensed" style="width: 100%;height: 100%;padding:0px;margin:0px !important;">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Size</th>
                            <th>Type</th>
                            <th>Date Modified</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
        <div id="drag-bar"></div>
    </div>
    <div id="remote">
        <div class="panel panel-default">
            <div class="panel-heading">
                <label class="control-label" for="remote-path">
                        Remote
                    </label>

                <span class="path-container">
                    <div class="input-group">
                        <input type="text" id="remote-path" class="form-control" />
                        <span class="input-group-btn" style="width: 17px;">
                            <button id="button-actions" class="btn btn-default" style="width:100%;padding-left:4px;padding-right:4px;" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span class="caret"></span>
                </button>
                </span>
            </div>
            </span>
            <span class="path-buttons">
                            <button id="btn-local-up" disabled="disabled" type="button" class="btn btn-default btn-xs" title="Go up a directory" onclick="">
                                <span class="fa-stack" style="top: -1px;width: 1em;height: 1em;line-height: 1em;font-size: 1em;">
                                    <i class="fa fa-folder-o fa-stack-2x" style="font-size: 1.2em"></i>
                                    <i class="fa fa-caret-up fa-stack-1x" style="font-size: 1em;margin-top: 1px;"></i>
                                </span>
            </button>
            </span>
        </div>
        <div class="panel-body" style="padding:0px;top:31px;bottom:1px;left:1px;right:1px;position: absolute;">
            <table id="remote-list" class="table table-striped table-hover table-condensed" style="width: 100%;height: 100%;padding:0px;margin:0px !important;">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Size</th>
                        <th>Type</th>
                        <th>Date Modified</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    </div>
    </div>
    <div id="bottom">
        <ul class="nav nav-tabs" role="tablist" style="background-color: #F5F5F5;box-shadow: inset 0 -1px 0 #fff;">
            <li role="presentation" class="active"><a href="#queue" aria-controls="queue" role="tab" data-toggle="tab">Queue</a></li>
            <li role="presentation"><a href="#log" aria-controls="log" role="tab" data-toggle="tab">Log</a></li>
        </ul>
        <div class="tab-content" style="padding: 4px;position: absolute;left: 0;right: 0;bottom: 0;top: 46px;">
            <div role="tabpanel" class="tab-pane fade in active" id="queue" style="margin:0 !important;padding:4px;height:100%;">
                <table id="queue-list" class="table table-striped table-hover table-condensed" style="width: 100%;height: 100%;padding:0px;margin:0 !important;">
                    <thead>
                        <tr>
                            <th>Local</th>
                            <th>&lt;-&gt;</th>
                            <th>Remote</th>
                            <th>Progress</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="log" style="padding:4px;height:100%;">
                <div id="remote-list" style="width:100%;height:100%;border:1px solid rgb(221, 221, 221);overflow:auto;">
                </div>
            </div>
        </div>
</body>

</html>